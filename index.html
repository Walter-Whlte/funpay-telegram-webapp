<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FunPay Manager</title>
    <style>
        :root {
            --tg-theme-bg-color: #efeff3;
            --tg-theme-text-color: #222222;
            --tg-theme-button-color: #5bc8fb;
            --tg-theme-secondary-bg-color: #ffffff;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            padding: 16px;
            margin: 0;
        }
        
        .card {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--tg-theme-button-color);
            color: #ffffff;
            border: none;
            border-radius: 8px;
            margin: 8px 0;
            font-size: 16px;
            text-align: center;
            cursor: pointer;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .online {
            background: #e0f7fa;
            color: #00796b;
        }
        
        .offline {
            background: #ffebee;
            color: #c62828;
        }
    </style>
</head>
<body>
    <div class="card">
        <h2>FunPay Control Panel</h2>
        <p>–í–µ—Ä—Å–∏—è: 1.0.0</p>
        <div id="bot-status" class="status-badge online">üü¢ –ê–∫—Ç–∏–≤–µ–Ω</div>
    </div>
    
    <div class="card">
        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ—Ç–∞–º–∏</h3>
        <button class="btn" onclick="sendCommand('add_lot')">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ª–æ—Ç</button>
        <button class="btn" onclick="sendCommand('edit_lots')">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ—Ç—ã</button>
        <button class="btn" onclick="sendCommand('update_prices')">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã</button>
    </div>
    
    <div class="card">
        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
        <div id="stats-container">
            <p>üìä <strong>–ü—Ä–æ–¥–∞–∂–∏ —Å–µ–≥–æ–¥–Ω—è:</strong> <span id="today-sales">0</span></p>
            <p>üí∞ <strong>–î–æ—Ö–æ–¥:</strong> <span id="today-revenue">0 ‚ÇΩ</span></p>
            <button class="btn" onclick="loadStats()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
        </div>
    </div>
    
    <div class="card">
        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
        <button class="btn" onclick="openSettings()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞</button>
        <button class="btn" onclick="showLogs()">üìù –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏</button>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        function initTelegramWebApp() {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
            Telegram.WebApp.MainButton.setText("–ó–∞–∫—Ä—ã—Ç—å").show().onClick(() => {
                Telegram.WebApp.close();
            });
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–º—É Telegram
            document.body.style.backgroundColor = Telegram.WebApp.colorScheme === 'dark' ? '#212121' : '#efeff3';
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç—É
        function sendCommand(command) {
            Telegram.WebApp.sendData(JSON.stringify({
                command: command,
                user_id: Telegram.WebApp.initDataUnsafe.user?.id
            }));
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function loadStats() {
            Telegram.WebApp.sendData(JSON.stringify({
                action: "get_stats"
            }));
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
        Telegram.WebApp.onEvent('webAppDataReceived', (event) => {
            const data = JSON.parse(event);
            if (data.stats) {
                document.getElementById('today-sales').textContent = data.stats.sales;
                document.getElementById('today-revenue').textContent = data.stats.revenue + ' ‚ÇΩ';
            }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', initTelegramWebApp);
    </script>
</body>
</html>